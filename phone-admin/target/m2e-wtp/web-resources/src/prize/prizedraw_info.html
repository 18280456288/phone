<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>抽奖模板设置详情——翼翔管理系统</title>
	<link rel="stylesheet" href="../css/amazeui.min.css">
	<link rel="stylesheet" href="../css/amazeui.datetimepicker.css">
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/system.css">
</head>

<body data-column="prize" data-page="prizedraw">

	<!-- 内容 -->
	<div class="cy-wrapper">

		<!-- 工具条 -->
		<div class="cy-toolbar">
			<div class="cy-location cy-l">
				<i class="cy-icon-fire"></i><span>抽奖模板设置详情</span>
			</div>
		</div>
		<!--//End 工具条 -->

		<div class="cy-grid" data-temp="prizedraw-info"></div>
	</div>
	<!--//End 内容 -->

	<script type="text/template" id="prizedraw-info">
		<div class="cy-section cy-m24 prizedraw-dsc">
			<div class="cy-section-main">
				<div class="cy-form-group cy-row">
					<label class="cy-col2">名称：</label>
					<div class="cy-col6">
						<input class="cy-input" type="text" name="name" placeholder="模板名称" value="${model.name}" data-error="请输入模板名称" required>
					</div>
				</div>
				<div class="cy-form-group cy-row">
					<label class="cy-col2">简介：</label>
					<div class="cy-col6">
						<textarea class="cy-textarea" name="dsc" placeholder="简介" data-error="请输入模板简介" required>${model.dsc}</textarea>
					</div>
				</div>
			</div>
		</div>

		<div class="cy-section cy-m24">
			<header class="cy-section-head cy-rel">
				<h2>奖品列表</h2>
				<div class="cy-section-operate cy-abs cy-middle">
					<div class="cy-operate cy-r am-btn-group">
						<button class="cy-btn cy-btn-green cy-btn-sm" data-prize="add" ${v-on:click="openAddModal" }>新增</button>
					</div>
				</div>
			</header>
			<div class="cy-section-main gift-list">
				<div class="cy-table">
					<div class="cy-tr">
						<div class="cy-td">奖项</div>
						<div class="cy-td">名称</div>
						<div class="cy-td">有效期</div>
						<div class="cy-td">奖品总数量</div>
						<div class="cy-td">奖品数量</div>
						<div class="cy-td">中奖概率</div>
						<div class="cy-td">操作</div>
					</div>
					<div class="cy-tbody" ${v-for:item in giftList}>
						<div class="cy-tr">
							<div class="cy-td">${v-index:cn}等奖</div>
							<div class="cy-td">${item.name}</div>
							<div class="cy-td">${item.days}</div>
							<div class="cy-td">${item.num}</div>
							<div class="cy-td cy-col2">
								<input class="cy-input" type="number" name="count" value="${item.count}" data-id="${item.pk}" placeholder="数量" ${v-on:input="changeAttr"}>
							</div>
							<div class="cy-td cy-col2">
								<input class="cy-input" type="number" name="chance" value="${item.chance}" data-id="${item.pk}" min="0.1" max="1" step="0.1" placeholder="概率（0.1 = 10%）" ${v-on:input="changeAttr"}>
							</div>
							<div class="cy-td cy-col2">
								<button class="cy-btn cy-btn-green cy-btn-sm" data-id="${item.pk}" ${v-on:click="edit"}>编辑</button>
								<button class="cy-btn cy-btn-sm" data-id="${item.pk}" ${v-on:click="del"}>删除</button>
							</div>
						</div>
						<${end}/div>
					</div>
				</div>
				<div class="cy-section-foot cy-rel">
					<div class="cy-col4">
						<button class="cy-btn cy-btn-green cy-btn-sm" ${v-on:click="save"}>保存</button>
					</div>
					<div class="cy-col8">
						<div class="cy-pagination"></div>
					</div>
				</div>
			</div>
	</script>

	<!-- 新增 -->
	<div class="am-modal am-modal-confirm" data-prize="add-modal">
		<div class="am-modal-dialog">
			<div class="am-modal-hd">新增奖品</div>
			<div class="am-modal-bd" data-temp="add-content"></div>
			<div class="am-modal-footer">
				<span class="am-modal-btn" data-am-modal-confirm data-type="submit">确定</span>
			</div>
		</div>
	</div>
	<!--//End 新增 -->


	<script type="text/template" id="add-content">
		<div class="gift-search">
			<div class="cy-form-group cy-row" style="margin-top: -12px;">
				<div class="cy-col10">
					<input class="cy-input" type="text" name="" placeholder="请输入名称进行搜索" value="" ${v-ref:searchInput}>
				</div>
				<div class="cy-col2">
					<button class="cy-btn cy-btn-block cy-btn-green" ${v-on:click="search"}>搜索</button>
				</div>
			</div>
		</div>
		<div class="cy-table cy-m12">
			<div class="cy-tr">
				<div class="cy-td">奖品名称</div>
				<div class="cy-td">类型</div>
				<div class="cy-td">有效期</div>
				<div class="cy-td">总数量</div>
				<div class="cy-td">操作</div>
			</div>
			<div class="cy-tbody" ${v-for:item in gifts}>
				<div class="cy-tr">
					<div class="cy-td">${item.name}</div>
					<div class="cy-td">${item.types}</div>
					<div class="cy-td">${item.days}</div>
					<div class="cy-td">${item.num}</div>
					<div class="cy-td cy-col2">
						<button class="cy-btn cy-btn-${item.checked} cy-btn-sm" data-id="${item.pk}" ${v-on:click="check"}>选取</button>
					</div>
				</div>
				<${end}/div>
			</div>
	</script>

	<script src="../js/require.js" data-main="../js/prize/prizedrawInfo"></script>
</body>

</html>
